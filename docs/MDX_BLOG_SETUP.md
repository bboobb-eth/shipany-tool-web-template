# MDX é™æ€åšå®¢ç³»ç»Ÿè®¾ç½®æŒ‡å—

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

è¿™ä¸ªç³»ç»Ÿå…è®¸æ‚¨åœ¨æœ¬åœ°ç¼–å†™ MDX æ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆé™æ€åšå®¢é¡µé¢ã€‚ä½¿ç”¨ Next.js SSG (Static Site Generation) æŠ€æœ¯ï¼Œæ— éœ€æ•°æ®åº“ï¼Œæ€§èƒ½å“è¶Šã€‚

## âœ¨ ç‰¹æ€§

- ğŸ“ **æœ¬åœ°ç¼–å†™**ï¼šåœ¨ `content/blog/` ç›®å½•ä¸‹ç¼–å†™ MDX æ–‡ä»¶
- ğŸ”„ **é™æ€ç”Ÿæˆ**ï¼šç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆé™æ€ HTML é¡µé¢
- âš¡ **æè‡´æ€§èƒ½**ï¼šé™æ€é¡µé¢ï¼ŒCDN å‹å¥½ï¼ŒåŠ è½½é€Ÿåº¦æå¿«
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ**ï¼šé€šè¿‡ç›®å½•ç»“æ„è‡ªåŠ¨è¯†åˆ«è¯­è¨€
- ğŸ·ï¸ **Frontmatter æ”¯æŒ**ï¼šä¸°å¯Œçš„å…ƒæ•°æ®é…ç½®
- ğŸš€ **é›¶æ•°æ®åº“**ï¼šçº¯æ–‡ä»¶ç³»ç»Ÿï¼Œéƒ¨ç½²ç®€å•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# è¿è¡Œå®‰è£…è„šæœ¬
./scripts/install-deps.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
pnpm add tsx
```

### 2. æµ‹è¯•ç°æœ‰ç¤ºä¾‹

```bash
# æµ‹è¯• MDX è§£æåŠŸèƒ½
pnpm test:content

# å¤„ç†å†…å®¹æ–‡ä»¶
pnpm build:content
```

### 3. åˆ›å»º MDX æ–‡ä»¶

åœ¨ `content/blog/` ç›®å½•ä¸‹åˆ›å»ºæ‚¨çš„ MDX æ–‡ä»¶ï¼š

```
content/blog/
â”œâ”€â”€ en/
â”‚   â””â”€â”€ my-first-post.mdx
â””â”€â”€ zh/
    â””â”€â”€ wo-de-di-yi-pian-wen-zhang.mdx
```

### 4. MDX æ–‡ä»¶æ ¼å¼

```mdx
---
title: "æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "
description: "è¿™æ˜¯ä¸€ç¯‡ç¤ºä¾‹æ–‡ç« "
author: "ä½œè€…å"
author_avatar: "/avatars/author.jpg"
cover_image: "/blog/cover.jpg"
slug: "my-first-post"
status: "online"
tags: ["æ•™ç¨‹", "ç¤ºä¾‹"]
created_at: "2024-01-15T10:00:00Z"
---

# æ–‡ç« æ ‡é¢˜

è¿™é‡Œæ˜¯æ–‡ç« å†…å®¹...

## å­æ ‡é¢˜

æ›´å¤šå†…å®¹...
```

### 5. æ„å»ºå’Œéƒ¨ç½²

```bash
# æµ‹è¯•å†…å®¹è§£æ
pnpm test:content

# åªå¤„ç†å†…å®¹æ–‡ä»¶
pnpm build:content

# æ„å»ºæ•´ä¸ªåº”ç”¨ï¼ˆåŒ…å«å†…å®¹å¤„ç†ï¼‰
pnpm build

# å¼€å‘æ¨¡å¼
pnpm dev
```

## ğŸ“ ç›®å½•ç»“æ„

```
project/
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ blog/
â”‚   â”‚   â”œâ”€â”€ en/              # è‹±æ–‡æ–‡ç« 
â”‚   â”‚   â””â”€â”€ zh/              # ä¸­æ–‡æ–‡ç« 
â”‚   â”œâ”€â”€ .content-cache.json  # ç¼“å­˜æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build-content.ts     # å†…å®¹æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ install-deps.sh      # ä¾èµ–å®‰è£…è„šæœ¬
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ mdx-parser.ts        # MDX è§£æå™¨
â”‚   â””â”€â”€ build-hooks.ts       # æ„å»ºé’©å­
â””â”€â”€ docs/
    â””â”€â”€ MDX_BLOG_SETUP.md    # æœ¬æ–‡æ¡£
```

## âš™ï¸ å·¥ä½œåŸç†

### æ„å»ºæµç¨‹

1. **æ–‡ä»¶æ‰«æ** - æ‰«æ `content/blog/` ä¸‹çš„æ‰€æœ‰ `.mdx` æ–‡ä»¶
2. **å˜æ›´æ£€æµ‹** - é€šè¿‡æ–‡ä»¶å“ˆå¸Œæ£€æµ‹å˜æ›´ï¼Œåªå¤„ç†ä¿®æ”¹è¿‡çš„æ–‡ä»¶
3. **å†…å®¹è§£æ** - æå– frontmatter å’Œæ­£æ–‡å†…å®¹
4. **æ•°æ®éªŒè¯** - éªŒè¯å¿…å¡«å­—æ®µå’Œæ ¼å¼
5. **æ•°æ®åº“æ“ä½œ** - åˆ›å»ºæˆ–æ›´æ–°æ•°æ®åº“è®°å½•
6. **ç¼“å­˜æ›´æ–°** - æ›´æ–°æ–‡ä»¶å¤„ç†ç¼“å­˜

### å¢é‡æ›´æ–°æœºåˆ¶

- ä½¿ç”¨ MD5 å“ˆå¸Œæ£€æµ‹æ–‡ä»¶å˜æ›´
- ç¼“å­˜æ–‡ä»¶è®°å½•å¤„ç†çŠ¶æ€
- åªå¤„ç†æœ‰å˜åŠ¨çš„æ–‡ä»¶ï¼Œæé«˜æ„å»ºæ•ˆç‡

## ğŸ“ Frontmatter å­—æ®µè¯´æ˜

### å¿…å¡«å­—æ®µ
- `title`: æ–‡ç« æ ‡é¢˜

### å¯é€‰å­—æ®µ
- `description`: æ–‡ç« æè¿°ï¼ˆSEOï¼‰
- `author`: ä½œè€…åç§°
- `author_avatar`: ä½œè€…å¤´åƒè·¯å¾„
- `cover_image`: å°é¢å›¾ç‰‡è·¯å¾„
- `slug`: URL å‹å¥½çš„æ ‡è¯†ç¬¦ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- `status`: æ–‡ç« çŠ¶æ€ï¼ˆ`online`, `offline`, `created`ï¼‰
- `tags`: æ ‡ç­¾æ•°ç»„
- `created_at`: åˆ›å»ºæ—¶é—´ï¼ˆISO æ ¼å¼ï¼‰
- `updated_at`: æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

### è¯­è¨€æ”¯æŒ
- è¯­è¨€é€šè¿‡ç›®å½•ç»“æ„è‡ªåŠ¨è¯†åˆ«
- `content/blog/en/` â†’ è‹±æ–‡æ–‡ç« 
- `content/blog/zh/` â†’ ä¸­æ–‡æ–‡ç« 
- å¯æ·»åŠ æ›´å¤šè¯­è¨€ç›®å½•

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ„å»ºè„šæœ¬

æ‚¨å¯ä»¥ä¿®æ”¹ `scripts/build-content.ts` æ¥è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼š

```typescript
// è‡ªå®šä¹‰å†…å®¹å¤„ç†
function processMarkdownContent(content: string): string {
  // æ·»åŠ æ‚¨çš„è‡ªå®šä¹‰å¤„ç†é€»è¾‘
  return content;
}

// è‡ªå®šä¹‰éªŒè¯è§„åˆ™
function validateFrontMatter(frontMatter: MDXFrontMatter): string[] {
  // æ·»åŠ æ‚¨çš„éªŒè¯è§„åˆ™
  return [];
}
```

### é›†æˆåˆ° CI/CD

åœ¨æ‚¨çš„ CI/CD æµç¨‹ä¸­æ·»åŠ å†…å®¹æ„å»ºæ­¥éª¤ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Build Content
  run: pnpm build:content

- name: Build Application
  run: pnpm build
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ„å»ºå¤±è´¥**
   - æ£€æŸ¥ frontmatter æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®ä¿å¿…å¡«å­—æ®µå·²å¡«å†™
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

2. **æ–‡ç« æœªæ˜¾ç¤º**
   - æ£€æŸ¥ `status` å­—æ®µæ˜¯å¦ä¸º `online`
   - ç¡®è®¤ slug åœ¨åŒè¯­è¨€ä¸‹å”¯ä¸€
   - éªŒè¯æ•°æ®åº“è¿æ¥é…ç½®

3. **ç¼“å­˜é—®é¢˜**
   - åˆ é™¤ `.content-cache.json` å¼ºåˆ¶é‡æ–°å¤„ç†
   - æ£€æŸ¥æ–‡ä»¶æƒé™

### è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹è¯¦ç»†æ„å»ºæ—¥å¿—
DEBUG=1 pnpm build:content

# å¼ºåˆ¶é‡æ–°å¤„ç†æ‰€æœ‰æ–‡ä»¶
rm content/.content-cache.json && pnpm build:content

# æ£€æŸ¥æ•°æ®åº“ä¸­çš„æ–‡ç« 
# åœ¨ Supabase æ§åˆ¶å°ä¸­è¿è¡Œï¼š
SELECT title, slug, locale, status FROM posts ORDER BY created_at DESC;
```

## ğŸ“š ç¤ºä¾‹æ–‡ä»¶

é¡¹ç›®å·²åŒ…å«ç¤ºä¾‹æ–‡ä»¶ï¼š
- `content/blog/en/getting-started.mdx` - è‹±æ–‡ç¤ºä¾‹
- `content/blog/zh/kuai-su-kai-shi.mdx` - ä¸­æ–‡ç¤ºä¾‹

æ‚¨å¯ä»¥å‚è€ƒè¿™äº›æ–‡ä»¶çš„æ ¼å¼æ¥åˆ›å»ºè‡ªå·±çš„å†…å®¹ã€‚

## ğŸ‰ å®Œæˆï¼

ç°åœ¨æ‚¨å¯ä»¥ï¼š
1. åœ¨ `content/blog/` ä¸‹åˆ›å»º MDX æ–‡ä»¶
2. è¿è¡Œ `pnpm build` è‡ªåŠ¨å¤„ç†å†…å®¹
3. åœ¨ç½‘ç«™ä¸ŠæŸ¥çœ‹æ‚¨çš„åšå®¢æ–‡ç« 

äº«å—ä½¿ç”¨ ShipAny çš„ MDX åšå®¢ç³»ç»Ÿï¼
